import{_ as w,u as I,q as S,g as k,s as F,x as f,h as B,r as Q,o as u,c as h,a as t,e as v,t as d,F as P,i as V,b as q,w as D,d as x,k as N,p as O,f as A}from"./index-feffca74.js";import{u as E}from"./useData-a1bdd8e8.js";import{_ as z}from"./notfound-04acbfba.js";const R={setup(){const a=I().user,g=S(),s=k([]),l=k([]),{foods:b,getAllFoods:y}=E();y();const o=F(async()=>{try{a&&(await f.get("/cartItem/"+a.user_id)).data.forEach(c=>{s.value.push(c.product_id),l.value.push(c.item_qty)})}catch(e){console.log(e)}}),i=B(()=>b.value.filter(e=>m(e,s.value)));let m=(e,c)=>{let _="";return c.forEach(r=>{parseInt(e.product_id)===r&&(_=e)}),_};return{foods:b,user:a,cartItem:s,itemQuantity:l,filterFoods:i,getAllCartItem:o,calculateSummaryPrice:()=>{let e=0,c=0,_=15,r=0;for(;r<l.value.length;)e+=parseInt(i.value[r].product_price)*l.value[r],c+=parseInt(i.value[r].product_discount)*l.value[r],r=r+1;i.value.length||(_=0);let C=e-c+_;return[e,c,_,C]},checkOutBtn:()=>{g.push("/checkout")},onQtyChange:async(e,c)=>{e.target.value<1?(e.target.value=1,l.value[c]=1):l.value[c]=e.target.value;let _={user_id:parseInt(a.user_id),product_id:parseInt(s.value[c]),item_qty:l.value[c]};await f.put("/cartItem/",_)},cancelBtn:async()=>{await f.delete("/cartItem/"+a.user_id),s.value=[],l.value=[]},removeBtn:async e=>{await f.delete("/cartItem/"+a.user_id+"/"+s.value[e]),s.value.splice(e,1),l.value.splice(e,1)}}}},n=p=>(O("data-v-cfddba22"),p=p(),A(),p),T={class:"shopping-cart-section"},G=n(()=>t("div",{class:"heading"},[t("span",null,"Shopping cart"),t("h3",null,"Good products, fast delivery")],-1)),L={class:"container"},M={class:"wrapper wrapper-content"},W={class:"row"},Y={class:"in-cart col-md-9"},j={class:"box"},H={class:"box-title item-total row"},J={style:{"font-size":"15px"}},K={key:0},U={key:1},X={key:0},Z=x('<div class="box-content row no-food" data-v-cfddba22><div class="content" data-v-cfddba22><h2 style="color:#057835fa;" data-v-cfddba22> You do not have any items in your cart, go shop now! </h2></div><div class="image" data-v-cfddba22><img src="'+z+'" alt="" data-v-cfddba22></div></div>',1),$=[Z],tt={key:1},st={class:"box-content row"},et={class:"image-box col-sm-3",style:{"padding-left":"0"}},ot=["src"],at={class:"desc col-sm-4"},ct={class:"item-name"},nt={class:"item-desc"},lt=n(()=>t("b",null,"Description",-1)),it=["onClick"],dt=n(()=>t("i",{class:"fa fa-trash"},null,-1)),rt={class:"item-price col-sm-1"},_t={class:"sale-price"},ut={key:0,class:"text-muted first-price"},ht={class:"item-qty col-sm-2 d-inline"},vt=n(()=>t("label",{for:"iQuantity",style:{"font-size":"12px","padding-right":"2px"}},"Quantity:",-1)),pt=["value","onChange"],mt={class:"cal-total col-sm-2"},ft={class:"item-total"},bt={class:"box-content row"},yt=n(()=>t("i",{class:"fa fa-arrow-left"},null,-1)),gt=["disabled"],kt=n(()=>t("i",{class:"fa fa fa-shopping-cart"},null,-1)),xt={class:"col-md-3"},Ct={class:"box"},wt=n(()=>t("div",{class:"box-title"},[t("h3",null,"Cart Summary")],-1)),It={class:"box-content"},St=n(()=>t("span",null,"Summary",-1)),Ft={class:"font-bold total-first-price"},Bt=n(()=>t("span",null,"Discount",-1)),Qt={class:"font-bold total-discount"},Pt=n(()=>t("span",null,"Delivery fee",-1)),Vt={class:"font-bold total-delivery"},qt=n(()=>t("hr",null,null,-1)),Dt=n(()=>t("span",null,"Total",-1)),Nt={class:"font-bold total-sale"},Ot={class:"btn-group"},At=["disabled"],Et=n(()=>t("i",{class:"fa fa-shopping-cart"},null,-1)),zt=["disabled"],Rt=x('<div class="box" data-v-cfddba22><div class="box-title" data-v-cfddba22><h3 data-v-cfddba22>Support</h3></div><div class="box-content text-center" data-v-cfddba22><h3 data-v-cfddba22><i class="fa fa-phone" data-v-cfddba22></i> +84 123 123 123</h3><span class="small" data-v-cfddba22> Please contact with us if you have any questions. We are avalible 24h. </span></div></div>',1);function Tt(p,a,g,s,l,b){const y=Q("router-link");return u(),h("div",T,[G,t("div",L,[t("div",M,[t("div",W,[t("div",Y,[t("div",j,[t("div",H,[t("h3",null,[t("p",J,[v(d(s.filterFoods.length.toString())+" ",1),s.filterFoods.length<2?(u(),h("span",K,"item")):(u(),h("span",U,"items"))]),v(" in your cart ")])]),s.filterFoods.length?(u(),h("div",tt,[(u(!0),h(P,null,V(s.filterFoods,(o,i)=>(u(),h("div",{key:i},[t("div",st,[t("div",et,[t("img",{src:`/images/${o.product_src}`,alt:"",class:"cart-product-img"},null,8,ot)]),t("div",at,[t("h2",ct,d(o.product_name),1),t("div",nt,[lt,t("p",null,d(o.product_desc),1)]),t("button",{class:"btn remove-btn",onClick:m=>s.removeBtn(i)},[dt,v("Remove item ")],8,it)]),t("div",rt,[t("span",_t,"$"+d(parseFloat(o.product_price)-parseFloat(o.product_discount)),1),parseFloat(o.product_discount)!=0?(u(),h("p",ut," $"+d(parseFloat(o.product_price)),1)):N("",!0)]),t("div",ht,[vt,t("input",{type:"number",id:"iQuantity",class:"form-control item-quantity",value:s.itemQuantity[i],min:"1",max:"1000",onChange:m=>s.onQtyChange(m,i)},null,40,pt)]),t("div",mt,[t("h4",ft," $"+d(parseInt((o.product_price-o.product_discount)*s.itemQuantity[i])),1)])])]))),128))])):(u(),h("div",X,$))]),t("div",bt,[q(y,{to:"/menu",class:"btn shop-btn"},{default:D(()=>[yt,v("Continue shopping")]),_:1}),t("button",{class:"btn check-out-btn",style:{"margin-left":"10px"},disabled:!s.filterFoods.length,onClick:a[0]||(a[0]=o=>s.checkOutBtn())},[kt,v("Checkout ")],8,gt)])]),t("div",xt,[t("div",Ct,[wt,t("div",It,[St,t("h3",Ft," $"+d(s.calculateSummaryPrice()[0]),1),Bt,t("h3",Qt," $"+d(s.calculateSummaryPrice()[1]),1),Pt,t("h3",Vt," $"+d(s.calculateSummaryPrice()[2]),1),qt,Dt,t("h2",Nt," $"+d(s.calculateSummaryPrice()[3]),1),t("div",Ot,[t("button",{class:"btn check-out-btn",disabled:!s.filterFoods.length,onClick:a[1]||(a[1]=o=>s.checkOutBtn())},[Et,v(" Checkout ")],8,At),t("button",{class:"btn cancel-btn",onClick:a[2]||(a[2]=o=>s.cancelBtn()),disabled:!s.filterFoods.length}," Cancel ",8,zt)])])]),Rt])])])])])}const Kt=w(R,[["render",Tt],["__scopeId","data-v-cfddba22"]]);export{Kt as default};
